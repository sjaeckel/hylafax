.\"	$Header: /usr/people/sam/fax/./man/RCS/sendpage.1,v 1.5 1995/04/08 21:36:36 sam Rel $
.\"
.\"  HylaFAX Facsimile Software
.\"
.\" Copyright (c) 1994-1995 Sam Leffler
.\" Copyright (c) 1994-1995 Silicon Graphics, Inc.
.\" HylaFAX is a trademark of Silicon Graphics
.\" 
.\" Permission to use, copy, modify, distribute, and sell this software and 
.\" its documentation for any purpose is hereby granted without fee, provided
.\" that (i) the above copyright notices and this permission notice appear in
.\" all copies of the software and related documentation, and (ii) the names of
.\" Sam Leffler and Silicon Graphics may not be used in any advertising or
.\" publicity relating to the software without the specific, prior written
.\" permission of Sam Leffler and Silicon Graphics.
.\" 
.\" THE SOFTWARE IS PROVIDED "AS-IS" AND WITHOUT WARRANTY OF ANY KIND, 
.\" EXPRESS, IMPLIED OR OTHERWISE, INCLUDING WITHOUT LIMITATION, ANY 
.\" WARRANTY OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.  
.\" 
.\" IN NO EVENT SHALL SAM LEFFLER OR SILICON GRAPHICS BE LIABLE FOR
.\" ANY SPECIAL, INCIDENTAL, INDIRECT OR CONSEQUENTIAL DAMAGES OF ANY KIND,
.\" OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS,
.\" WHETHER OR NOT ADVISED OF THE POSSIBILITY OF DAMAGE, AND ON ANY THEORY OF 
.\" LIABILITY, ARISING OUT OF OR IN CONNECTION WITH THE USE OR PERFORMANCE 
.\" OF THIS SOFTWARE.
.\"
.if n .po 0
.ds Fx \fIHyla\s-1FAX\s+1\fP
.ds Ps P\s-2OST\s+2S\s-2CRIPT\s+2
.TH SENDPAGE 1 "March 9, 1995"
.SH NAME
sendpage \- submit a pager job for transmission
.SH SYNOPSIS
.B sendpage
[
.I options
] [
.IR message ...
]
.SH DESCRIPTION
.I sendpage
submits a pager transmission request
to a \*(Fx facsimile server.
A request is normally processed immediately, although
it may also be queued for transmission at a later time
using a syntax identical to the
.IR at (1)
command.
For each job that is queued,
.I sendpage
prints a
.I "job identifier"
and a
.I "job group identifier"
on the standard output.
A job identifier is the token by which jobs are
identified within \*(Fx; job group identifiers are
used to reference a set of jobs that have been
submitted at the same time.
Job and job group identifiers can be supplied to the
.IR faxrm (1)
command to remove the jobs or to the
.IR faxalter (1)
command to alter job parameters.
.PP
Pages may be sent to one or more devices and, optionally,
include a text message (depending on the capability of the receiving device).
Each device is identified by a
Pager Identification Number (\s-1PIN\s+1) specified with the
.B \-p
option; for example,
sendpage -p 12345 ``Help, the fax machine is on fire!''.
.PP
This interface is provided on an interim basis simply to test out
the functionality and will change soon.
.PP
The phone number of the pager
service provider must be specified on the command line
using the
.B \-d
option.
This number is actually the dialing string to use to contact
the service provider.
Phone numbers may include non-numeric characters for
readability\(emonly digits and ``+'' (for denoting a
country code) are significant in placing a call.
Dialing prefixes, such as ``1'' and ``011''
(for long distance calling in the United States) need
not be included if an unambigous number is specified.
Examples of unambiguous phone numbers are:
.nf
.sp .5
.RS
.ta \w'+31.77.594.313      'u
\+31.77.594.131	\fIto call the Netherlands\fP
+14159657824	\fIto call California\fP
9657824	\fIto make a local call\fP
1-215-356-1666	\fIto call Pennsylvania from within the US\fP
.RE
.sp .5
.fi
Non-numeric strings, such as ``*70'' (to defeat
call waiting), may be included in the destination phone number.
Whether or not they are stripped from the string used to
dial the destination is dependent on the dialstring
rules configured for use on the server; c.f.
.IR config (4F)
and
.IR dialrules (4F).
.SH OPTIONS
.TP 12
.BI \-a " time"
Schedule transmission at the indicated
.IR time .
Times are specified using the syntax of the
.IR at (1)
command; e.g. ``now + 30 minutes'' to schedule transmission
30 minutes in the future.
By default,
.I sendpage
schedules pages for ``now''.
.TP 12
.B \-D
Enable notification by electronic mail when the
page has been delivered to the service provider (default).
.TP 12
.BI \-d " destination"
Create a job to send the supplied messages to
a service provider at the indicated
.IR destination .
.TP 12
.BI \-f " from"
Use
.I from
as the identity of the message sender.
Otherwise the sender is the user that invoked
.IR sendpage .
The sender is an account name to which the \*(Fx software
should direct notification messages.
The
.I from
identity may be a fullblown ``From:'' line, e.g.
e.g. ``Joe Blow <joe@foo.com>''
and ``joe@foo.com (Joe Blow)'' are acceptable.
If no host-part is specified in the
.I from
string the local hostname is used.
This option is useful when
.I sendpage
is invoked on behalf of another user, such as in the implementation
of an electronic mail to pager gateway.
.TP 12
.BI \-h " host\fR[\fP:modem\fR]\fP"
Force the jobs to be processed on a specific
.I host
and, optionally, using a particular
.IR modem .
The
.I host
may be either a symbolic name or a network address.
If no
.B \-h
option is supplied,
.I sendpage
uses the
.SM FAXSERVER
environment variable to identify the \*(Fx server to
which the jobs should be directed.
If no server is specified then
.I sendpage
attempts to contact a server on the local host.
If no modem is specified, the job will be submitted to any
available modem.
An alternative syntax for the server specification, \fImodem\fP@\fIhost\fP,
is also supported; e.g. ``ttym2@oxford.berkeley.edu''.
.TP 12
.BI \-i " identifier"
Use the 
.I identifier
string in any notification messages instead of the usual job
identifier number.
This option is useful for applications that cross reference
notification messages against job submissions.
.TP 12
.BI \-k " time"
Kill the job if it does not complete in the indicated
.IR time .
As for the
.B \-a
option, the
.I time
is specifed using notation compatible with
.IR at (1).
Note that the
.I time
is relative to the time of the initial transmission attempt.
The default kill time is ``now +30 minutes'' (30 minutes from
the time the job is first processed).
To retry for an hour, ``now +1 hour'' could be used.
.TP 12
.B \-N
Do not notify the sender by electronic mail when the
page has been delivered to the service provider.
By default \*(Fx will notify the sender when the job has completed.
.TP 12
.BI \-p " PIN"
The Pager Identification Number (\s-1PIN\s+1) for a device 
that is to receive the message.
A message can be sent to multiple devices that are all serviced
by a single provider by specifiying multiple
.B \-p
options.
.TP 12
.BI \-P " priority"
Assign the specified scheduling
.I priority
for each job.
A priority is an integer value in the range [0-255].
Lower values result in higher priority processing.
By default, each job is assigned 127 for an initial scheduling priority.
A job's priority is raised (numerically lowered) for each
failed attempt to transmit so that retransmit attempts
are done ahead of newly submitted jobs.
The
.I priority
may also be specified as one of the following symbolic names:
.I default
or 
.I normal
(127),
.I bulk
or
.I junk
(207),
.I high
(63).
.TP 12
.B \-R
Enable notification by electronic mail when the
message has been delivered and when it is requeued for retransmission.
By default \*(Fx will notify the sender if there is
when the job has completed.
.TP 12
.BI \-t " tries"
Make no more than
.I tries
attempts to send the page.
By default, \*(Fx will terminate a job if:
3 consecutive attempts to send a particular message fail, or
it appears the receiver is not a service provider.
Otherwise \*(Fx places no limit on the
.I number
of attempts to send a page, instead terminating a job
if it is not completed within a 
.I "kill time"
timeout interval.
Note that a try
is a call in which carrier is established and the 
.SM IXO/TAP
protocol is commenced; this is contrasted with a call
attempt that might have failed because the line was busy.
.TP 12
.B \-v
Trace the protocol between
.I sendpage
and the
.I faxd.recv
server process that does the submission work on the
remote machine.
This information is directed to the standard output.
.SH DIAGNOSTICS
The following messages are generated because of problems
encountered on the local machine.
.PP
.B "Could not call server."
The \*(Fx server on the remote machine did not respond.
.PP
The following messages may be printed by
.IR sendpage .
These messages describe problems encountered by
the server process on the remote machine.
This list is incomplete;
other messages may be generated by the server under
unusual circumstances\(em consult
.IR faxd.recv (1M)
for the complete list.
.PP
.B "Warning, no server appears to be running."
This is an information message that indicates the
job was queued for processing, but that no \*(Fx
scheduler process appear to be running.
.PP
.B "Write error."
.I faxd.recv
encountered an I/O error while receiving a job.
.PP
.B "Can not get your network address."
.I faxd.recv
was unable to get the client's machine name in order
to verify the client is allowed to submit a job.
.PP
.B "The server does not have a permissions file."
The server is missing the file
.BR etc/hosts .
This file must be present and contain a list of the
hosts that are allowed to submit jobs.
.PP
.B "Service refused; you do not have permission to use the fax server from %s."
The client is not permitted to submit jobs to this server from the
specified host.
Only those hosts and users listed in the file
.B etc/hosts
on the server machine are permitted to submit jobs.
.SH "SEE ALSO"
.IR at (1),
.IR hylafax (1),
.IR faxalter (1),
.IR faxrm (1),
.IR faxstat (1),
.IR faxq (1M),
.IR hylafax (4F)
