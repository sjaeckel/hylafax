.\"	$Header: /usr/people/sam/flexkit/fax/man/man1/RCS/faxcomp.1,v 1.2 91/06/07 15:20:53 sam Exp $
.\"
.\" Copyright (c) 1991 by Sam Leffler.
.\" All rights reserved.
.\"
.\" This file is provided for unrestricted use provided that this
.\" legend is included on all tape media and as a part of the
.\" software program in whole or part.  Users may copy, modify or
.\" distribute this file at will.
.\"
.TH FAXCOMP 1 "June 4, 1991"
.SH NAME
faxcomp \- interactively compose a facsimile job for transmission
.SH SYNOPSIS
.B faxcomp
[
.B \-d
.I dbname
] [
.B \-h
.I hostname
] [
.B \-lm
] [
.B \-n
] [
.B \-DR
] [
.B \-p
.I pagecount
] [
.IR files ...
]
.SH DESCRIPTION
.I Faxcomp
provides an interactive mechanism through which a user
can submit one or more facsimile transmission requests
to a 
.I FlexFAX
facsimile server.
.I Faxcomp
presents a dialogue window to collect the
information necessary to compose a submission and then
invokes the
.IR sendfax (1)
program to do the actual submission.
Command line options are provided (mainly) to force
the default state for selections\(em for example,
.B \-m
to force a default of medium resolution.
.PP
The body of the facsimile is created by concatenating
the files specified on the command line.
If no files are supplied,
.I faxcomp
reads data from the standard input.
.I Faxcomp
(actually,
.IR sendfax )
automatically converts PostScript\(tm,
.SM ASCII\c
-text,
.IR troff (1)
output,
and
Silicon Graphics format images
for transmission as facsimile.
.SM TIFF
Class F documents are passed directly through
for transmission so that it is easy to forward
a received facsimile.
Any other document or image format must be
pre-converted to one of the above formats in order to
include it in a facsimile.
.PP
By default,
.I faxcomp
will generate a cover page for each
facsimile that is to be transmitted.
This cover page is generated by an ancillary program,
.IR faxcover (1),
using information supplied interactively
(and any page count specified on the command line with the
.B \-p
option).
Cover page generation can be disabled through
a toggle button.
The initial state for this button can be set to off (no
cover page), with the
.B \-n
option.
.PP
Phone numbers are constrained to follow international
dialing conventions.
Numbers are made up of decimal digits with
spaces, periods, and hyphens included for readability.
Country codes must be preceeded by a leading ``+''.
Dialing prefixes, such as ``1'' and ``011''
(for long distance calling in the United States) need
not be included if an unambigous number is specified.
Examples of unambiguous phone numbers are:
.nf
.in +0.5i
.ta \w'+31.77.594.313    'u
\+31.77.594.131	\fIto call the Netherlands\fP
+14159657824	\fIto call California\fP
9657824	\fIto make a local call\fP
1-215-356-1666	\fIto call Pennsylvania from within the US\fP
.in -0.5i
.fi
Note that strings such as ``*72'' (to defeat
call waiting) are not currently supported.
.PP
By default, a facsimile is sent at low
resolution (98 lines/inch).
It is also possible to request
medium resolution (196 lines/inch), often
called
.IR "fine mode" ,
and
high resolution (400 lines/inch), also called
.IR "super-fine mode" .
The initial choice of resolution can be controlled
with the
.B \-m
(medium) and
.B \-l
(low) options.
.PP
By default,
.I faxcomp
uses the
.B FAXSERVER
environment variable to identify the facsimile server to
which the job should be queued to.
This can be overridden with a
.B \-h
option.
.PP
If the first attempt to send a facsimile is
unsuccessful,
.I FlexFAX
will periodically try to resend the facsimile.
By default, 
.I FlexFAX
will try to transmit the facsimile for one day from the time
of the initial transmission.
.PP
If an error is encountered while processing a job, the
facsimile server will send an electronic mail message to
the account that submitted the job.
One can also request to be notified
by mail when the job is completed
and when the job must be requeued for retransmission.
By default no notification is selected.
The
.B \-D
and
.B \-R
options iniitally enable notification when a job is done
and when a job is requeued, respectively.
.PP
For each job that is queued,
.I faxcomp
displays a
.I "job identifier"
in a dialogue box.
This number can be supplied to the
.I faxrm
command to remove the job.
.SH "PHONE BOOK"
A simple facsimile machine
.I "phone book"
facility is provided by
.IR faxcomp .
If the file
.I ~/.faxdb
exists,
.I faxcomp
will interpret it as a database of potential destinations.
A string entered in the 
.I Name
field will be used as a pattern for searching the database.
If a facsimile is sent to an unknown destination,
.I faxcomp
will automatically record the appropriate information in the
database file.
Beware however, that old entries are not automatically updated by
.I faxcomp
if they are interactively changed\(em they must be manually edited.
.PP
The database file is a series of
.SM ASCII
free-format records.
Each record is comprised of an arbitrary number
of fields, with each field specified as a ``key:value'' pair.
Keys can be any string of non-blank characters,
although certain strings are well-known:
.nf
.sp .5
.ta \w'Voice-Number    'u
.in +0.5i
\fBKey	Description\fP
Name	search key (typically a person)
FAX-Number	facsimile machine phone number
Voice-Number	person's phone number
Location	geographic location
Company	corporate identification
.fi
.in -0.5i
.sp .5
Values are also strings.  If a value has embedded
white space, then it must be enclosed in quote marks.
Comments are introduced by a ``#'' character and
extend to the end of the line.
.PP
A hierarchical structure is created by nesting bracketed records.
Nested records inherit unspecified information from their parent records.
For example,
.sp .5
.nf
.in +0.5i
[ Company: "Silicon Graphics, Inc." FAX-Number: +1.415.965.7824
  [ Name: "Sam Leffler" ]
  [ Name: "Robin Schaufler" ]
]
.in -0.5i
.fi
.sp .5
Specifies two potential destinations to which a facsimile
might be sent: ``Sam Leffler'' and ``Robin Schaufler'';
both of which inherit ``Silicon Graphics, Inc'' as their
company.
.SH DIAGNOSTICS
The following messages are generated because of problems
encountered on the local machine.
.PP
.B "Could not call server."
The facsimile server on the remote machine did not respond.
.PP
.B "No input data; tranmission aborted."
No data was supplied (typically on the standard input).
No facsimile will be sent.
.PP
Consult
.IR sendfax (1)
for a list of diagnostics that it may print.
Beware, however, that these diagnostics are directed
to the terminal, so unless
.I faxcomp
is run with a controlling terminal, any output will be lost.
.SH FILES
.ta \w'/usr/local/bin/fax/faxcover    'u
.nf
~/.faxdb	personal fax machine database
/usr/local/bin/fax/sendfax	for submitting a job
/usr/local/bin/fax/faxcover	for generating cover sheets
/usr/tmp/faxdocXXXXXX	temporary copy of stdin
/usr/tmp/faxcoverXXXXXX	temporary cover sheet
.fi
.SH BUGS
Alterations to an existing database entry are
not recorded; only new entries.
There is no support for distribution lists.
.SH "SEE ALSO"
.IR faxalter (1),
.IR faxcover (1),
.IR faxmail (1),
.IR faxrm (1),
.IR faxstat (1),
.IR faxd (1M),
.IR flexfax (4F)
