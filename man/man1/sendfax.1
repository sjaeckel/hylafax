.\"	$Header: /usr/people/sam/flexkit/fax/man/man1/RCS/sendfax.1,v 1.3 91/06/04 21:36:04 sam Exp $
.\"
.\" Copyright (c) 1991 by Sam Leffler.
.\" All rights reserved.
.\"
.\" This file is provided for unrestricted use provided that this
.\" legend is included on all tape media and as a part of the
.\" software program in whole or part.  Users may copy, modify or
.\" distribute this file at will.
.\"
.TH SENDFAX 1 "June 4, 1991"
.SH NAME
sendfax \- submit a facsimile job for transmission
.SH SYNOPSIS
.B sendfax
[
.B \-a
.I transmit-time
] [
.B \-c
.I comments
] [
.B \-d
.I destination
] [
.B \-f
.I directory
] [
.B \-h
.I hostname
] [
.B \-k
.I kill-time
] [
.B \-lm
] [
.B \-n
] [
.B \-v
] [
.B \-DR
] [
.IR files ...
]
.SH DESCRIPTION
.I Sendfax
submits one or more facsimile transmission requests
to a 
.I FlexFAX
facsimile server.
Requests are normally processed immediately, although
they may also be queued for a later time by
using a syntax identical to
.IR at (1).
.PP
Facsimile documents are made from the concatenation
of one or more files specified on the command line.
If no files are supplied,
.I sendfax
reads data from the standard input.
.I Sendfax
automatically converts PostScript\(tm,
.SM ASCII\c
-text,
.IR troff (1)
output,
and
Silicon Graphics format images
for transmission as facsimile.
.SM TIFF
Class F documents are passed directly through
for transmission so that it is easy to forward
a received facsimile.
Any other document or image format must be
pre-converted to one of the above formats in order to
include it in a facsimile.
.I Sendfax
converts text-oriented files to PostScript, and images to
.SM TIFF
Class F prior to submitting a job for transmission.
The conversion utilities
.IR text2fax (1),
.IR dit2fax (1),
and
.IR sgi2fax (1)
are used by
.I sendfax
to convert
.SM ASCII\c
-text,
.I troff
output, and images, respectively.
When a conversion program is needed,
.I sendfax
first looks in a ``filter directory'',
.IR /usr/local/bin/fax .
If that fails, the normal search path mechanism is tried.
The
.B \-f
option can be used to specify an alternate filter directory.
.PP
By default,
.I sendfax
will generate a cover page for each
facsimile that is to be transmitted.
This cover page is generated by an ancillary program,
.IR faxcover (1),
using information supplied on the command line:
the
.B \-c
option is used to specify a 
.I comments
field and, if a destination is specified as
.IR user@fax-number ,
the
.I user
string will be passed to
.I faxcover
as the identify of the recepient.
(Note that multi-word names must be enclosed in quote marks;
for example,
``Sam Leffler@+14155551212''.
See
.I faxcover
for more information about how cover pages are created.
If no cover page is desired (for example, because
it is already included in the document), the
.B \-n
option may be specified.
.PP
A destination is the phone number of the remote fax machine.
Phone numbers may include non-numeric characters for
readability\(em only digits and ``+'' (for denoting a
country code) are actually used in placing a call.
Dialing prefixes, such as ``1'' and ``011''
(for long distance calling in the United States) need
not be included if an unambigous number is specified.
Examples of unambiguous phone numbers are:
.nf
.in +0.5i
.ta \w'+31.77.594.313    'u
\+31.77.594.131	\fIto call the Netherlands\fP
+14159657824	\fIto call California\fP
9657824	\fIto make a local call\fP
1-215-356-1666	\fIto call Pennsylvania from within the US\fP
.in -0.5i
.fi
Note that strings such as ``*72'' (to defeat
call waiting) are not currently supported.
.PP
By default, a facsimile is sent at low
resolution (98 lines/inch).
Medium resolution (196 lines/inch), often
called
.IR "fine mode" ,
can be requested with the
.B \-m
option.
Low resolution can also be explicitly requested with the
.B \-l
option.
.PP
By default,
.I sendfax
uses the
.B FAXSERVER
environment variable to identify the facsimile server to
which the job should be queued to.
This can be overridden with a
.B \-h
option.
.PP
If the first attempt to send a facsimile is
unsuccessful,
.I FlexFAX
will periodically try to resend the facsimile.
By default, 
.I FlexFAX
will try to transmit the facsimile for one day from the time
of the initial transmission.
The
.B \-k
option can be used to specified an alternate time
for killing the job.
This time is specified using notation compatible with
.IR at (1)
and as a time relative to the time of the initial transmission
attempt.
Thus, for example, the default kill time is specified as
``+1 day'' (one day from the current time).
To retry for an hour, ``+1 hour'' could be used.
.PP
If an error is encountered while processing a job, the
facsimile server will send an electronic mail message to
the account that submitted the job.
If the
.B \-D
option is specified,
.I FlexFAX
will also notify the account by mail when the job is
completed.
If the
.B \-R
option is specified, notification will be returned any
time the job must be requeued for retransmission.
These two options are independent.
That is, to be notified both when a job is done and
when it is requeued, both must be specified on the
command line.
.PP
If the
.B \-v
option is specified,
.I sendfax
will print information on the standard output
about each conversion and cover sheet
generation operation it does.
.PP
For each job that is queued,
.I sendfax
prints a
.I "job identifier"
on the standard output.
This number can be supplied to the
.I faxrm
command to remove the job.
.SH DIAGNOSTICS
The following messages are generated because of problems
encountered on the local machine.
.PP
.B "Could not call server."
The facsimile server on the remote machine did not respond.
.PP
.B "No input data; tranmission aborted."
No data was supplied (typically on the standard input).
No facsimile will be sent.
.PP
.B "Error converting data; command was \"%s\"."
A data conversion operation failed; the shell
command that was used is printed.
.PP
.B "Can not convert %s."
Data needed to be converted for transmission, but the
required conversion program was not located.
This may indicate that the 
.I FlexFAX
software was incorrectly installed; or perhaps
that an
.SM NFS\c
-mounted directory is temporarily unavailable.
.PP
.B "%s: Can not determine file type."
.I sendfax
was unable to deduce if the file was PostScript,
.I troff
output, plain text, or
a Silicon Graphics or
.SM TIFF
format image.
.PP
.B "%s: Not a regular file."
The file is something other than a regular file; for
example, a directory.
.PP
.B "%s: Non-ascii stuff and not a known type."
The file is not a known type and
contains non-\c
.SM ASCII
data.
.PP
.B "Could not generate cover sheet; none sent."
A problem occurred while trying to generate a
cover sheet.
This is not treated as a fatal error; the facsimile
is sent without a cover sheet.
This problem occurs if the
.IR faxcover (1)
program is not installed, or is not accessible,
.PP
The following messages may be printed by
.IR sendfax .
These messages describe problems encountered by
the server process on the remove machine.
This list is incomplete;
other messages may be generated by the server under
unusual circumstances\(em consult
.IR faxd.recv (1M)
for the complete list.
.PP
\fBWarning, no server appears to be running.\fP
This is an information message that indicates the
job was queued for processing, but that no facsimile
server(s) appear to be running.
.PP
\fBWrite error.\fP
.I faxd.recv
encountered an I/O error while receiving a document
to transmit.
.PP
\fBCan not get your network address.\fP
.I faxd.recv
was unable to get the client's machine name in order
to verify the client is allowed to submit a job.
.PP
\fBThe server does not have a permissions file.\fP
The facsimile server is missing the file
.BR etc/hosts .
This file must be present and contain a list of the
hosts that are allowed to submit jobs.
.PP
\fBYour host does not have permission to use the fax server.\fP
The client's host is not permitted to submit jobs to this server.
Only those hosts listed in the file
.B etc/hosts
are permitted to submit jobs.
.SH FILES
.ta \w'/usr/local/bin/fax/text2fax    'u
.nf
/usr/local/bin/fax/text2fax	for converting text to PostScript
/usr/local/bin/fax/dit2fax	for converting troff output to PostScript
/usr/local/bin/fax/sgi2fax	for converting an \s-2SGI\s0 image file to \s-2TIFF\s0
/usr/local/bin/fax/faxcover	for generating cover sheets
/usr/tmp/sndfaxXXXXXX	temporary files
.fi
.SH BUGS
Dialing strings are currently limited
to numerics and the ``+'' character.
The file typing rules are primitive; they should be done
according to some external database such as
.IR /etc/magic ,
(as used by
.IR file (1)),
or the scheme employed by
.IR workspace (1G).
.SH "SEE ALSO"
.IR at (1),
.IR faxalter (1),
.IR faxcomp (1),
.IR faxcover (1),
.IR faxmail (1),
.IR faxrm (1),
.IR faxstat (1),
.IR faxd (1M),
.IR flexfax (4F)
