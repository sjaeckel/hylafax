.\"	$Header: /usr/people/sam/flexkit/fax/man/man4/RCS/xferlog.4f,v 1.1 91/05/11 16:47:07 sam Exp $
.\"
.\" Copyright (c) 1991 by Sam Leffler.
.\" All rights reserved.
.\"
.\" This file is provided for unrestricted use provided that this
.\" legend is included on all tape media and as a part of the
.\" software program in whole or part.  Users may copy, modify or
.\" distribute this file at will.
.\"
.TH XFERLOG 4F "April 29, 1991"
.SH NAME
xferlog \- 
.I FlexFAX
facsimile transfer log
.SH DESCRIPTION
The file
.B etc/xferlog
contains information about the transmission and reception
of facsimile for all facsimile modems on a machine.
The file contains one line per transfer.
Lines are fixed-format, blank-separated
.SM ASCII
strings.
Each record of a transmission is of the form:
.sp .5
.ti +0.5i
MM/DD/YY HH:MM SEND "<sender>" "<dest-number>" #pages time-to-send
.PP
while a reception record is of the form:
.sp .5
.ti +0.5i
MM/DD/YY HH:MM RECV "<TSI>" "<local-number>" #pages time-to-recv
.PP
Dates are given as numeric month/day/year, with the year only
two digits.
Times use a 24-hour format.
Sending and receiving identities are always enclosed in quote marks.
For trnamissions, the sender's identity is the electronic
mailing address.
For receptions, the Transmission Subscriber Identifier (\c
.SM TSI\c
) is given; as received from the remote facsimile machine.
The page counts are always integral numbers.
Partial pages that are to be retransmitted are not included
in the page count.
The time to receive a facsimile is given in seconds.
The time to send a facsimile is given in minutes.
Both times should be interpreted as floating point values.
.PP
The simple 
.SM ASCII
format was designed to be easy to process with programs like
.IR awk (1).
For example, the following
.I awk
program generates totals of the number of
pages and the time spent transmitting facsimile
for each user.
.in +0.5i
.nf
.ft C
.ta \w'$3 == "SEND"    'u
$3 == "SEND"	{ gsub("\"", "", $4);
	  sendpages[$4] += $6;
	  sendtime[$4] += $7;
	}
END	{ OFS="\t";
	  print "Pages", "Time (minutes)", "Account";
	  for (i in sendpages)
	      print sendpages[i], sendtime[i], i;
	}
.ft P
.fi
.in -0.5i
.SH BUGS
The date format will ``break'' in the year 2000.
Times for sending and receiving should use the same units
(minutes or seconds).
.SH "SEE ALSO"
.IR faxd (1M)
