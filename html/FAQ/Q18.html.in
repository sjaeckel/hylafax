<HTML><HEAD><TITLE>
HylaFAQ: How do I keep private information off the cover page?
</TITLE></HEAD><BODY>
<H1>Q18: How do I keep private information off the cover page?</H1>
<P><HR>
<A HREF="mailto:flexfaq@flake.asd.sgi.com">
<IMG SRC="@HTMLPATH@/icons/faq-feedback.gif" ALT="?" ALIGN=left HSPACE=8 BORDER=0>
</A>
Got something to say about this answer?  Use the 
<A HREF="@CGIPATH@/faq-feedback?Question=How+do+I+keep+private+information+off+the+cover+page%3F">
feedback form</A>
to send your comments to the HylaFAQ maintainers, or hit the question mark
button to invoke the mailer.
<BR CLEAR=left><HR>
<DL COMPACT>
<DT>Q.
<DD><I>How do I keep private information off the cover page?</I>
<LISTING>
> This is probably a simple question, but I haven't been able to figure
> out an answer to it yet....... We have a 6 digit ID that needs to
> be plugged in for long distance calls (like a calling card). When I
> use "sendfax -d "John Doe@4157779999,123456" the faxcover sheet has
> my id number in the Fax Number field. What do I need to do to
> prevent this ? Thanks.
</LISTING>
<P>
Good question!!!  We have the same sort of calling card number for
long distance calls and users around here are concerned about
making these numbers visible.  They're supposed to be kept secret.
We also want to prevent these numbers from appearing in any log files.
<P>
<DT>A.
<DD>To keep private information off of the fax cover sheet and
out of the publicly displayed information (such as the queue listings
shown by 
<A HREF="@CGIPATH@/manpage?1+faxstat">faxstat</A>)
you need to create a
<A HREF="@CGIPATH@/manpage?4+dialrules">dialrules</A>
file that's used on systems where HylaFAX client applications
are run.
<P>
For example, if calling card information is specified as a trailing
comma-prefixed number string (perhaps with trailing whitespace)
then the following rules would strip
it off when creating an <I>displayable representation</I> of the
dial string:
<LISTING>
DisplayNumber = [
    ",[0-9]+[ ]*" =	! strip calling card info and trailing ws
]
</LISTING>
<P>
Using the
<A HREF="@CGIPATH@/manpage?1+dialtest">dialtest</A>
program to test out the rules:
<LISTING>
% /var/spool/fax/bin/dialtest -v dialrules
Define AreaCode = "415"
Define CountryCode = "1"
Define InternationalPrefix = "011"
Define LongDistancePrefix = "1"
DisplayNumber := [
  ",[0-9]+[ ]*" = ""
]
Warning, no "CanonicalNumber" rules.
Warning, no "DialString" rules.
ready> 4157779999,123456
input = "4157779999,123456"
canonical = "4157779999,123456"
dial-string = "4157779999,123456"
display = "4157779999"
ready>^D
%
</LISTING>
The above rules must be placed in the HylaFAX client application
library area on each client machine; for example, in
the file <B>/usr/local/lib/fax/dialrules</B>.
<P>
Note that on the server the session logs <STRONG>must be protected</STRONG>
to insure the unadulterated dialstrings are not readable by normal users.
This is done using the <B>LogFileMode</B> configuration parameter; e.g.
<LISTING>
LogFileMode: 600	# protect logs with calling card info
</LISTING>

<P>
If the
<A HREF="@CGIPATH@/manpage?1+faxcron">faxcron</A>
administrative script is run on the fax server machine, then it's also
a good idea to shorten the <B>AGELOG</B> parameter that controls how long
session logs are kept around.
Either that, or the script could be changed to automatically strip
privileged information once it's no longer needed for debugging failed
calls.
</DL>
<P><HR>
<ADDRESS>
<A HREF="@HTMLPATH@/sam.html">Sam Leffler</A> / <A HREF="mailto:sam@engr.sgi.com">sam@engr.sgi.com</A>.
</ADDRESS>
</BODY></HTML>
