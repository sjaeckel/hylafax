<HTML><HEAD><TITLE>
HylaFAQ: Retrain negative (pages lost during transmit)?
</TITLE></HEAD><BODY>
<H1>Q37: Retrain negative (pages lost during transmit)?</H1>
<P><HR>
<A HREF="mailto:flexfaq@flake.asd.sgi.com">
<IMG SRC="@HTMLPATH@/icons/faq-feedback.gif" ALT="?" ALIGN=left HSPACE=8 BORDER=0>
</A>
Got something to say about this answer?  Use the 
<A HREF="@CGIPATH@/faq-feedback?Question=Retrain+negative+%28pages+lost+during+transmit%29%3F">
feedback form</A>
to send your comments to the HylaFAQ maintainers, or hit the question mark
button to invoke the mailer.
<BR CLEAR=left><HR>
<DL COMPACT>
<DT>Q.
<DD><I>Retrain negative (pages lost during transmit)?</I>
<P>
Here is my situation:
<P>
FlexFax v2.2.2pl1, Sparc LX, Solaris 2.3<BR>
Multi-Tech 1432 BA/A, fw 0111 (AT&T chip).<BR>
<P>
I constantly loose page eight from a ten page document received
from a fax back system.  Pages 1-7 look O.K., but after page 8, 
I get a "retrain negative", Then  receive two more pages (Pages 9 and 10).
Faxinfo claims 9 pages but the log looks like it received 10 pages. One 
thing is that page 8 (missing page), has two RECV lines in the log. The second
line says 1592 lines received. (There is a lot of white space on this
page. Is this significant?) Is this simply another case of the remote unable
to resend the page and/or protocol violation, or is there something more?
<P>
Here is the log beginning with page 8 to the end.
<LISTING>
Jun 22 17:01:09.32: [  751]: RECV recv MPS (more pages, same document)
Jun 22 17:01:09.33: [  751]: RECV send MCF (message confirmation)
Jun 22 17:01:09.33: [  751]: --> [2:OK]
Jun 22 17:01:09.33: [  751]: <-- [6:AT+FDR]
Jun 22 17:01:10.55: [  751]: --> [14:+FHT:FF 13 8C ]
Jun 22 17:01:11.29: [  751]: --> [7:CONNECT]
Jun 22 17:01:11.29: [  751]: RECV: begin page
Jun 22 17:01:11.30: [  751]: MODEM set XON/XOFF/FLUSH: input disabled, output enabled
Jun 22 17:01:11.30: [  751]: <-- data [1]
Jun 22 17:01:20.18: [  751]: RECV: 16384 bytes of data, 523 lines
Jun 22 17:01:29.07: [  751]: RECV: 12524 bytes of data, 1592 lines
Jun 22 17:01:29.07: [  751]: MODEM set XON/XOFF/DRAIN: input enabled, output enabled
Jun 22 17:01:29.08: [  751]: --> [24:+FPTS:2,2113,105,45,1960]
Jun 22 17:01:32.50: [  751]: --> [14:+FHR:FF 13 4F ]
Jun 22 17:01:32.50: [  751]: --> [6:+FET:0]
Jun 22 17:01:32.50: [  751]: RECV recv MPS (more pages, same document)
Jun 22 17:01:32.51: [  751]: RECV send RTN (retrain negative)
Jun 22 17:01:32.51: [  751]: --> [2:OK]
Jun 22 17:01:32.51: [  751]: <-- [6:AT+FDR]
Jun 22 17:01:33.66: [  751]: --> [14:+FHT:FF 13 4C ]
Jun 22 17:01:35.49: [  751]: --> [26:+FHR:FF 13 83 00 62 F8 00 ]
Jun 22 17:01:39.75: [  751]: --> [14:+FHT:FF 13 84 ]
Jun 22 17:01:40.14: [  751]: --> [5:+FCFR]
Jun 22 17:01:40.14: [  751]: --> [21:+FDCS:1,5,0,2,0,0,0,0]
Jun 22 17:01:40.15: [  751]: REMOTE wants 14400 bit/s
Jun 22 17:01:40.15: [  751]: REMOTE wants page width 1728 pixels in 215 mm
Jun 22 17:01:40.15: [  751]: REMOTE wants unlimited page length
Jun 22 17:01:40.16: [  751]: REMOTE wants 7.7 line/mm
Jun 22 17:01:40.16: [  751]: REMOTE wants 1-D MR
Jun 22 17:01:40.51: [  751]: --> [7:CONNECT]
Jun 22 17:01:40.51: [  751]: RECV: begin page
Jun 22 17:01:40.52: [  751]: MODEM set XON/XOFF/FLUSH: input disabled, output enabled
Jun 22 17:01:40.52: [  751]: <-- data [1]
Jun 22 17:01:49.35: [  751]: RECV: 16384 bytes of data, 540 lines
Jun 22 17:01:58.11: [  751]: RECV: 16384 bytes of data, 374 lines
Jun 22 17:02:07.04: [  751]: RECV: 16384 bytes of data, 407 lines
Jun 22 17:02:15.90: [  751]: RECV: 16384 bytes of data, 393 lines
Jun 22 17:02:24.40: [  751]: RECV: 15596 bytes of data, 551 lines
Jun 22 17:02:24.41: [  751]: MODEM set XON/XOFF/DRAIN: input enabled, output enabled
Jun 22 17:02:24.51: [  751]: --> [18:+FPTS:1,2264,0,0,0]
Jun 22 17:02:25.67: [  751]: --> [14:+FHR:FF 13 4F ]
Jun 22 17:02:25.67: [  751]: --> [6:+FET:0]
Jun 22 17:02:25.67: [  751]: RECV recv MPS (more pages, same document)
Jun 22 17:02:25.68: [  751]: RECV send MCF (message confirmation)

[page 8]

Jun 22 17:02:25.68: [  751]: --> [2:OK]
Jun 22 17:02:25.68: [  751]: <-- [6:AT+FDR]
Jun 22 17:02:26.85: [  751]: --> [14:+FHT:FF 13 8C ]
Jun 22 17:02:27.61: [  751]: --> [7:CONNECT]
Jun 22 17:02:27.61: [  751]: RECV: begin page
Jun 22 17:02:27.62: [  751]: MODEM set XON/XOFF/FLUSH: input disabled, output enabled
Jun 22 17:02:27.62: [  751]: <-- data [1]
Jun 22 17:02:36.36: [  751]: RECV: 16384 bytes of data, 579 lines
Jun 22 17:02:45.32: [  751]: RECV: 16384 bytes of data, 424 lines
Jun 22 17:02:54.11: [  751]: RECV: 16384 bytes of data, 384 lines
Jun 22 17:02:59.46: [  751]: RECV: 8701 bytes of data, 878 lines
Jun 22 17:02:59.46: [  751]: MODEM set XON/XOFF/DRAIN: input enabled, output enabled
Jun 22 17:02:59.47: [  751]: --> [18:+FPTS:1,2264,0,0,0]
Jun 22 17:03:04.44: [  751]: --> [14:+FHR:FF 13 2F ]
Jun 22 17:03:04.44: [  751]: --> [6:+FET:2]
Jun 22 17:03:04.44: [  751]: RECV recv EOP (no more pages or documents)
Jun 22 17:03:04.45: [  751]: RECV send MCF (message confirmation)

[page 9]

Jun 22 17:03:04.45: [  751]: --> [2:OK]
Jun 22 17:03:04.46: [  751]: <-- [6:AT+FDR]
Jun 22 17:03:05.65: [  751]: --> [14:+FHT:FF 13 8C ]
Jun 22 17:03:07.39: [  751]: --> [14:+FHR:FF 13 FB ]
Jun 22 17:03:07.39: [  751]: --> [7:+FHNG:0]
Jun 22 17:03:07.39: [  751]: REMOTE HANGUP: Normal and proper end of connection (code 0)
Jun 22 17:03:07.96: [  751]: --> [2:OK]
Jun 22 17:03:12.01: [  751]: RECV: end
Jun 22 17:03:12.02: [  751]: SESSION END
</LISTING>
<P>
<DT>A.
<DD>The remote never retransmitted the bad page.  The fax server overwrites
bad pages when a retransmitted copy is supposed to be delivered.  That is
why your file only has 9 pages in it.  I can't recall the exact wording
in the T.30 spec, but I believe it's not required that the sender be
capable of retransmitting a bad page.  FlexFAX will properly retransmit
a page if it receives RTN.
</DL>
<P><HR>
<ADDRESS>
<A HREF="@HTMLPATH@/sam.html">Sam Leffler</A> / <A HREF="mailto:sam@engr.sgi.com">sam@engr.sgi.com</A>.
</ADDRESS>
</BODY></HTML>
